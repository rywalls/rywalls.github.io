var ctx,thresholdSrcDATARAW,imageOneSrcDATARAW,thresholdCanvas,thresholdctx,foregroundCanvasctx,backgroundCanvasctx,finalOutputDATA,tffont="Garamond_Premiere_Pro_Semibold_GFX",eso={defaultsetup:function(){logging=!1,fbf.clean(_root),fbf.replaceSVGDefs(),fbf.displayBlock(_root),_root.buttonMode=!0,fbf.show(_root),_root.style.cssText+="background-color:#000; overflow:hidden;",keyline=addKeylineTo(_root,WID,HEI,"#000000",1),onMobile=fbf.isMobile()},addShadow:function(t){t.style.cssText+=" box-shadow: -0px 0px 2px 5px #00000033;"},setListeners:function(){_root.addEventListener("mouseover",eso.adRollover),_root.addEventListener("mouseleave",eso.adRollout)},setupRating:function(t){"uk"==t&&fbf.show(mc_rating_pegi)},setupButton:function(t,e){var a="BUTTON TEXT",n=20,o=0,r=0,s="#000000";e&&(e.text&&(a=e.text),e.fontSize&&(n=e.fontSize),e.letterSpacing&&(o=e.letterSpacing),e.lineHeight&&(r=e.lineHeight),e.textColour&&(s=e.textColour));var d=document.getElementById(t.id+"_text"),l=TextField({normal:tffont},a,n,o,r,"center",s);d.innerHTML="",d.appendChild(l);var c=l._width,g=l._height;TweenMax.set(l,{x:"-="+.5*c,y:"-="+.5*g});var h=parseInt(mc_button_background.style.width,10),u=parseInt(mc_button_background.style.height,10),p=document.createElement("div");p.id="button_overlay",p.setAttribute("class","do"),p.className="do",p.style.width=h-3+"px",p.style.height=u-2+"px",p.style.overflow="hidden",p.style.zIndex=1e4;var f=document.createElement("div");f.id="button_shine",f.style.position="absolute",f.style.width="20px",f.style.height=u+"px",f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 30"><defs><style>.cls-1{fill:#fff;}</style></defs><title>Asset 1</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><polygon class="cls-1" points="20 30 0 30 15 0 35 0 20 30"/></g></g></svg>',f.children[0].style.height=u+"px",p.appendChild(f),mc_button.appendChild(p),eso.resetButtonShine(),TweenMax.set(p,{y:"-="+.5*u,x:"-="+.5*h,alpha:.25})},resetButtonShine:function(){button_animating=!1;var t=button_shine._width;TweenMax.set(button_shine,{x:-(2*t)})},animateButton:function(){var t=parseInt(mc_button_background.style.width,10);button_animating||(button_animating=!0,TweenMax.to(button_shine,.5,{x:t,ease:Power2.easeInOut,onComplete:eso.resetButtonShine}))},dynamicText:function(t,e){var a="left",n=20,o=0,r=0,s="#FFFFFF",d=0;for(e&&(e.text&&(button_text=e.text),e.align&&(a=e.align),e.fontSize&&(n=e.fontSize),e.letterSpacing&&(o=e.letterSpacing),e.lineHeight&&(r=e.lineHeight),e.textColour&&(s=e.textColour),e.paddingTop&&(d=e.paddingTop)),i=0,t.innerHTML="";i<button_text.length;i++){var l=TextField({normal:tffont},button_text[i],n,o,r,a,s);if(t.appendChild(l),"center"==a){var c=l._width;l._height,TweenMax.set(l,{x:"-="+.5*c,y:"+="+d+r*i})}else if("right"==a){var c=l._width;l._height,TweenMax.set(l,{x:"-="+c,y:"+="+d+r*i})}else TweenMax.set(l,{y:"+="+d+r*i})}},setupTagline:function(t,e){var a=["DRAGONS","ARE","UNLEASHED"],n="left",o=20,r=0,s="#FFFFFF",d=.5*WID,l=.5*HEI;e&&(e.text&&(a=e.text),e.align&&(n=e.align),e.fontSize&&(o=e.fontSize),e.letterSpacing&&(r=e.letterSpacing),e.textColour&&(s=e.textColour),e.x&&(d=e.x),e.y&&(l=e.y));var c=document.createElement("div");for(c.id="taglineContainer",c.setAttribute("class","do"),c.className="do",t.appendChild(c),TweenMax.set(c,{x:d,y:l}),i=0;i<a.length;i++){var g=TextField({normal:tffont},a[i],o,r,0,n,s);if(c.appendChild(g),"center"==n){var h=g._width;g._height,TweenMax.set(g,{x:"-="+.5*h})}else if("right"==n){var h=g._width;g._height,TweenMax.set(g,{x:"-="+h})}TweenMax.set(g,{alpha:0})}},animateTagline:function(t){var e=.25,a=.5,n=0,o=0,r=document.getElementById("taglineContainer").children;t&&(t.speed&&(e=t.speed),t.delayBetween&&(a=t.delayBetween),t.delay&&(n=t.delay),t.pauseOnLast&&(o=t.pauseOnLast));for(var s=r.length-1;s>=0;s--){var d=r[s];TweenMax.from(d,.25,{scale:8,transformOrigin:"50% 50%",ease:Power1.easeOut,delay:n+s*a}),TweenMax.to(d,.25,{alpha:1,ease:Power1.easeOut,delay:n+s*a}),s!=r.length-1?TweenMax.to(d,.25,{alpha:0,scale:0,transformOrigin:"50% 50%",ease:Power1.easeOut,delay:n+(s+1)*a}):TweenMax.to(d,.5,{alpha:0,transformOrigin:"50% 50%",ease:Power1.easeOut,delay:n+o+(s+1)*a,onComplete:animateElements})}},setupCanvasEffect:function(t,e){var a=document.createElement("div");a.id="canvas_house",a.setAttribute("class","do"),a.className="do",mc_artwork.appendChild(a),eso.createCanvas("imagesContainer",{width:2*WID,height:HEI}),eso.createCanvas("threshold"),eso.createCanvas("backgroundCanvas"),eso.createCanvas("midgroundCanvas"),eso.createCanvas("foregroundCanvas"),ctx=$("imagesContainer").getContext("2d"),TweenMax.set($("imagesContainer"),{y:HEI+20});var n=new Image;n.src="spritesheet0.jpg",n.onload=function(){var t=mc_artwork_tolerance_map.style.backgroundPosition.split("px"),e=mc_background.style.backgroundPosition.split("px");ctx.drawImage(n,-1*t[0],-1*t[1],WID,HEI,0,0,WID,HEI),ctx.drawImage(n,-1*e[0],-1*e[1],WID,HEI,WID,0,WID,HEI),thresholdSrcDATARAW=ctx.getImageData(0,0,WID,HEI),imageOneSrcDATARAW=ctx.getImageData(WID,0,WID,HEI),thresholdctx=$("threshold").getContext("2d"),foregroundCanvasctx=$("foregroundCanvas").getContext("2d"),midgroundCanvasctx=$("midgroundCanvas").getContext("2d"),backgroundCanvasctx=$("backgroundCanvas").getContext("2d"),thresholdSrcDATA=ctx.createImageData(WID,HEI),imageOneSrcDATA=ctx.createImageData(WID,HEI),foregroundOutputDATA=foregroundCanvasctx.createImageData(WID,HEI),midgroundOutputDATA=foregroundCanvasctx.createImageData(WID,HEI),backgroundOutputDATA=foregroundCanvasctx.createImageData(WID,HEI),eso.drawOnCanvases(),startFlow()}},createCanvas:function(t,e){var a=WID,n=HEI;e&&(e.width&&(a=e.width),e.height&&(n=e.height));var o=document.createElement("canvas");o.className="do",o.width=a,o.height=n,o.id=t,document.getElementById("canvas_house").appendChild(o)},drawOnCanvases:function(t){for(var e=thresholdSrcDATARAW.data,a=0;a<e.length;a+=4)e[a]<=55?a>=.5*e.length?(foregroundOutputDATA.data[a+0]=imageOneSrcDATARAW.data[a],foregroundOutputDATA.data[a+1]=imageOneSrcDATARAW.data[a+1],foregroundOutputDATA.data[a+2]=imageOneSrcDATARAW.data[a+2],foregroundOutputDATA.data[a+3]=imageOneSrcDATARAW.data[a+3],a<=.75*e.length?(backgroundOutputDATA.data[a+0]=228,backgroundOutputDATA.data[a+1]=205,backgroundOutputDATA.data[a+2]=182,backgroundOutputDATA.data[a+3]=255):(backgroundOutputDATA.data[a+0]=150,backgroundOutputDATA.data[a+1]=140,backgroundOutputDATA.data[a+2]=118,backgroundOutputDATA.data[a+3]=255)):(midgroundOutputDATA.data[a+0]=imageOneSrcDATARAW.data[a],midgroundOutputDATA.data[a+1]=imageOneSrcDATARAW.data[a+1],midgroundOutputDATA.data[a+2]=imageOneSrcDATARAW.data[a+2],midgroundOutputDATA.data[a+3]=imageOneSrcDATARAW.data[a+3],backgroundOutputDATA.data[a+0]=240,backgroundOutputDATA.data[a+1]=226,backgroundOutputDATA.data[a+2]=218,backgroundOutputDATA.data[a+3]=255):(backgroundOutputDATA.data[a+0]=imageOneSrcDATARAW.data[a],backgroundOutputDATA.data[a+1]=imageOneSrcDATARAW.data[a+1],backgroundOutputDATA.data[a+2]=imageOneSrcDATARAW.data[a+2],backgroundOutputDATA.data[a+3]=imageOneSrcDATARAW.data[a+3]);thresholdctx.putImageData(thresholdSrcDATA,0,0),foregroundCanvasctx.putImageData(foregroundOutputDATA,0,0),midgroundCanvasctx.putImageData(midgroundOutputDATA,0,0),backgroundCanvasctx.putImageData(backgroundOutputDATA,0,0)},createSVGgradient:function(t,e){var a="#000000",n="#000000",o=WID,r=HEI,s="top",d="0%",l="100%";e&&(e.colour1&&(a=e.colour1),e.colour2&&(n=e.colour2),e.width&&(o=e.width),e.height&&(r=e.height),e.position&&(s=e.position),e.offsetStop1&&(d=e.offsetStop1),e.offsetStop2&&(l=e.offsetStop2));var c=document.createElement("div");c.id=t.id+"_svg_container",c.setAttribute("class","do"),c.className="do",c.style.width=o+"px",c.style.height=r+"px";for(var g="http://www.w3.org/2000/svg",h=document.createElementNS(g,"svg"),u=document.createElementNS(g,"defs"),p=document.createElementNS(g,"linearGradient"),f=document.createElementNS(g,"rect"),v=[{color:a,offset:d,opacity:"0"},{color:n,offset:l,opacity:"1"}],A=0,m=v.length;A<m;A++){var x=document.createElementNS(g,"stop");x.setAttribute("offset",v[A].offset),x.setAttribute("stop-color",v[A].color),x.setAttribute("stop-opacity",v[A].opacity),p.appendChild(x)}p.id="Gradient",p.setAttribute("x1","0"),p.setAttribute("x2","0"),p.setAttribute("y1","0"),p.setAttribute("y2","1"),u.appendChild(p),f.setAttributeNS(null,"fill","url(#Gradient)"),f.setAttributeNS(null,"width","100%"),f.setAttributeNS(null,"height","100%"),h.setAttributeNS(null,"id","svg_gradient"),h.setAttributeNS(null,"width",o),h.setAttributeNS(null,"height",r),h.appendChild(u),h.appendChild(f),c.appendChild(h),t.appendChild(c),"bottom"==s&&TweenMax.set(c,{y:HEI-r})},adRollover:function(){eso.animateButton()},adRollout:function(){}};