var gridHorizontal,gridVertical,keyline,video_intro,out,chosenButton,config,AdBase=function(e){this.local="file:"===window.location.protocol||"localhost"==window.location.hostname,this.version="0.0",this.init=e,this.clickthrough=function(e){"undefined"!=typeof EB?e?EB.clickthrough(e):EB.clickthrough():"undefined"!=typeof Enabler&&Enabler.exitOverride(e||"default",BackgroundExit)},this.getAsset=function(e){return local?e.local:onov?e.ov:"undefined"!=typeof EB&&!1==ovversion?"number"==typeof e.eb?EB.getAssetUrl("",e.eb):e.eb:"undefined"!=typeof Enabler?getAsset(e.dc):void 0}};function Ad(){AdBase.call(this,"init"),this.width=300,this.start=function(){}}Ad.prototype=Object.create(AdBase.prototype),Ad.prototype.constructor=Ad;var myAd=new Ad;myAd.start();var WID=160,HEI=600,local="file:"===window.location.protocol||"localhost"==window.location.hostname,keylineConfig={colour:"#ff9900",thickness:1},configChoices=["trailer","preorder"],sizmek=!1,expandUnit=!1,ratio=16/9,VIDWID=WID,VIDHEI=HEI,vidReplayed=!1,onEndscreen=!1,nonVidGo=!1,weClick=!1,landscape=!1,preDateElements=[],postDateElements=[],isThisRespUnit=!1,constructRespSetUp=!1;function setExits(){}function startBanner(){loadScripts()}function loadScripts(){loadJS(["fbf.js","config.js","python.js"],loadSvgs)}function loadSvgs(){fbf.loadSvgs(defaultsetup,"svg.gz.js")}function defaultsetup(){logging=fbf.isLocal(),out=!1,fbf.clean(_root),fbf.replaceSVGDefs(),fbf.displayBlock(_root),_root.buttonMode=!0,document.getElementsByTagName("BODY")[0].style.overflow="hidden",_root.style.cssText+="background-color:#000; overflow:hidden;",keyline=addKeylineTo(_root,WID,HEI,"#ff6600",keylineConfig.thickness),fbf.show(_root),python.stopIEWobble(window.navigator.userAgent),setupLanguages(config.lang),python.straplineFontSetup(mc_strapline,config.straplineStore),python.buttonFontSetup(mc_button,config.buttonStore,config.lang),python.setUpDateGFX(mc_date,config.dateStore,config.lang),python.sortOutDateElements(preDateElements,postDateElements),python.sortVideoLogo(mc_video_logo,mc_logo),TweenMax.set(mc_video_logo,{y:8*mc_video_logo._height}),log("mc_video_logo height: "+mc_video_logo._height),housekeepButtons(),tweekElementsForLanguages(),python.emergencyOverride(),setup()}function whatButtonToShow(){"PreOrder"==config.chosenBtn?chosenButton="btn_preorder":"Trailer"==config.chosenBtn?chosenButton="btn_watch_trailer":"MP"==config.chosenBtn?chosenButton="btn_MP":"Zombies"==config.chosenBtn&&(chosenButton="btn_zombies")}function housekeepButtons(){log("-----------HOUSE KEEP BUTTONS-----------------------------------------------"),fbf.hide(mc_button.children),whatButtonToShow()}function tweekElementsForLanguages(){log("tweekElementsForLanguages"),"uaear"==config.lang?TweenMax.set(mc_date,{scale:.9,x:"-=14",y:"+=18"}):"fr"==config.lang||"de"==config.lang||(TweenMax.set(mc_date,{scale:.58,x:"-=3",y:"+=0"}),TweenMax.set(mc_button,{scale:.33}))}function setupLanguages(){log("setupLanguages"),"at"==config.lang||"chfr"==config.lang||"chde"==config.lang||"uaear"==config.lang||"uaeen"==config.lang?fbf.setLang(mc_rating,"uk"):fbf.setLang(mc_rating,config.lang)}function setup(){log("setup"),setListeners(),setupIntroElements(),startFlow()}function setupIntroElements(){initialHide(),setUpLanguages()}function initialHide(){fbf.hide(mc_strapline)}function setUpLanguages(){"uaear"==config.lang||"uaeen"==config.lang?fbf.setLang(mc_rating,"uk"):fbf.setLang(mc_rating,config.lang)}function startFlow(){log("startFlow"),log(fbf.isMobile()),config.rich&&!fbf.isMobile()&&config.showIntroVid?videoIntro():nonVideoIntro()}function videoIntro(){fbf.displayBlock(mc_video_logo),fbf.show(mc_video_logo),fbf.displayNone(mc_logo,mc_ps4,mc_strapline,mc_date),setupVideo(mc_video_intro,myAd.getAsset(assets.videoIntroMp4),myAd.getAsset(assets.videoIntroWebM),VIDWID,VIDHEI)}function nonVideoIntro(){log("nonVideoIntro"),nonVidGo||(animateEndscreen(),nonVidGo=!0)}function animateEndscreen(){fbf.displayNone(mc_video_intro,mc_video_logo),fbf.displayBlock(mc_logo,mc_ps4,mc_date),log("animateEndScreen"),python.fadeDownAndDisplayNone(mc_black),python.animateBackground(mc_bg_house,0,"50% 50%"),python.animateForeground(mc_ruin_scaled,0,"50% 40%"),python.animateSimpleFadeUp(mc_ps4,0),python.animateLogo(mc_logo,.7),python.animateDate(mc_date,1),"uaear"!=config.lang?animateChosenButton(2):python.showChosenButton(chosenButton),python.animateSimpleFadeUp(mc_devLogos,3),python.animateSimpleFadeUp(mc_rating,3)}function animateChosenButton(e){python.showChosenButton(chosenButton),onEndscreen||python.animateButton($(chosenButton),2)}function immediateEndScreen(){log("immediateEndscreen"),config.rich&&!fbf.isMobile()&&config.showIntroVid&&(video_intro&&video_intro.currentTime>0&&!video_intro.paused&&!video_intro.ended&&video_intro.readyState>2&&video_intro.pause(),fbf.displayNone(mc_video_intro)),onEndscreen||(log("first time round"),fbf.displayNone(mc_accolade_house,mc_video_logo,mc_black),fbf.displayBlock(mc_ps4,mc_logo,mc_date,mc_button),fbf.show(mc_button),fbf.show($(chosenButton)),TweenMax.killAll(!0),onEndscreen=!0)}function setListeners(){log("setListeners")}function clickType(){Enabler.exit("default")}function showUpToRoot(e){for(var o=e;o;)o.visible=!0,o.display=!0,o=o.parentNode}function setUpCloseBtn(){}var clickToExpandClick=function(){log("clickToExpandClick")},closeClick=function(){log("closeClick")},buyNowClick=function(){log("buyNowClick"),clickType()},ExpandForTrailerClick=function(){log("ExpandForTrailerClick")},learnMoreClick=function(){log("learnMoreClick"),clickType()},watchClick=function(){log("watchClick"),clickType()},preOrderClick=function(){log("preOrderClick"),clickType()},vidPlayClick=function(){log("vidPlayClick"),clickType()};function setupVideo(e,o,n,t,i){log("setupVideo"),video_intro=fbf.createVideo("video_intro",e._width,e._height,o,n),video_intro.style.cssText+="width:"+t+"px; height:"+i+"px; display:block;",fbf.displayBlock(e),fbf.show(e),e.appendChild(video_intro),sizmek&&!local&&new EBG.VideoModule(video_intro),video_intro.addEventListener("play",videoStarted,!1),video_intro.addEventListener("ended",videoFinished,!1),video_intro.addEventListener("canplaythrough",canPlayHandler,!1),video_intro.addEventListener("error",videoError,!0),video_intro.load()}function videoError(){log("videoError"),nonVideoIntro()}function canPlayHandler(){log("playVid:"+video_intro.id),weClick||video_intro.play(),TweenMax.to(mc_black,.5,{alpha:0})}function videoStarted(e){log("videoStarted"),(e.target||e.srcElement).removeEventListener("play",videoStarted)}function videoFinished(e){log("videoFinished");var o=e.target||e.srcElement;log(o.id),o.pause(),"video_intro"==o.id?(log("showEndscreen"),videoComplete()):log("resetVideo")}function videoComplete(){log("videoComplete"),video_intro.pause(),TweenMax.set(mc_black,{alpha:1}),animateEndscreen()}var _root=$("root"),mc_background=$("mc_background"),mc_bg_house=$("mc_bg_house"),mc_ruin=$("mc_ruin"),mc_ruin_scaled=$("mc_ruin_scaled"),mc_rating=$("mc_rating"),rating_english=$("rating_english"),rating_french=$("rating_french"),rating_spanish=$("rating_spanish"),rating_italian=$("rating_italian"),rating_german=$("rating_german"),rating_australian=$("rating_australian"),rating_dutch=$("rating_dutch"),rating_russian=$("rating_russian"),mc_rating_polish=$("mc_rating_polish"),mc_devLogos=$("mc_devLogos"),mc_button=$("mc_button"),mc_video_intro=$("mc_video_intro"),mc_video_logo=$("mc_video_logo"),mc_ps4=$("mc_ps4"),mc_accolade_house=$("mc_accolade_house"),mc_accoladesmudge=$("mc_accoladesmudge"),mc_logo=$("mc_logo"),mc_logobox=$("mc_logobox"),mc_date=$("mc_date"),mc_strapline=$("mc_strapline"),mc_black=$("mc_black"),mc_close=$("mc_close"),btn_close=$("btn_close"),mc_btn_bg=$("mc_btn_bg"),mc_close_cross=$("mc_close_cross"),mc_flash=$("mc_flash"),mc_ctahit=$("mc_ctahit");