var initLogoScaleX,initLogoScaleY,initLogoY,vidreplayInitScale,ButtonSizeInfo,fontArray=[{buttonFont:"buttonTextGFX"},{dateFont:"dateFontGFX",dateKerning:.05},{straplineFont:"dateFontGFX"}],svgNS="http://www.w3.org/2000/svg",strapCounter=0,straplineWidPark=0,python={emergencyOverride:function(){log("python.emergencyOverride")},stopIEWobble:function(t){log("stopIEWobble");var e=t;(e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0||e.indexOf("Edge/")>=0)&&(_root.style.cssText+="-webkit-transform:rotateZ(0.00001deg);-moz-transform:rotateZ(0.00001deg);-ms-transform:rotateZ(0.00001deg);-o-transform:rotateZ(0.00001deg);transform:rotateZ(0.00001deg);")},sortVideoLogo:function(t,e){log("--------------------------------------------------------sortVideoLogo");var n=e.cloneNode(!0);n.id="vidwatermark",t.innerHTML="",t.appendChild(n);var o=parseInt(t.children[0].style.width.split("px")[0]),a=parseInt(t.children[0].style.height.split("px")[0]);TweenMax.set(t.children[0],{x:-o,y:-a}),TweenMax.set(t.children[0],{x:0,y:0})},straplineFontSetup:function(t,e,n){if(log("------------STRAPLINE----------------------------------------------------"),log(n),"pl"==n||"ru"==n||"uaear"==n)log("SHOULD BE GOING THROUGH THIS ONE --------------------------------------------------------------"),python.webFontRouteSetup(t,e,"straplineText",n);else{t.innerHTML="",divWidth=parseInt(t.style.width.split("px")[0]);for(var o=0;o<e.length;o++){strapCounter++;var a=fontArray[2].straplineFont,i=e[o].strapText,r=e[o].strapFontSize,s=e[o].strapLineHeight,l=e[o].strapColour,d=e[o].dateEffect,p=TextField(a,i,r,0,s,"center",l);p.id="text_"+strapCounter,t.appendChild(p),void 0!=e[o].dateEffect&&(e[o].datePost?postDateElements.push(p):preDateElements.push(p)),p._x=-(.5*Math.round(parseInt(p._("svg").getAttribute("width")))),p._y=-(.5*Math.round(parseInt(p._("svg").getAttribute("height")))),log(d)}}},AccoladeFontSetup:function(t,e,n,o){if(log("------------STRAPLINE----------------------------------------------------"),log(n),"pl"==n||"ru"==n||"uaear"==n)log("SHOULD BE GOING THROUGH THIS ONE --------------------------------------------------------------"),python.webFontRouteSetup(t,e,"straplineText",n);else{t.innerHTML="",divWidth=parseInt(t.style.width.split("px")[0]);for(var a=0;a<e.length;a++){strapCounter++;var i="arvofontGFX",r=e[a].strapText,s=e[a].strapFontSize,l=e[a].strapLineHeight,d=e[a].strapColour,p=e[a].strapTextAuthor,h=e[a].strapTextAuthorFontSize,f=e[a].strapTextAuthorColour,u=e[a].dateEffect,c=TextField(i,r,s,0,l,"center",d),g=TextField(i,p,h,0,l,"center",f);c.id="text_"+strapCounter,g.id="text_author_"+strapCounter,t.appendChild(c),t.appendChild(g),void 0!=e[a].dateEffect&&(e[a].datePost?postDateElements.push(c):preDateElements.push(c)),c._x=-(.5*Math.round(parseInt(c._("svg").getAttribute("width")))),c._y=-(.5*Math.round(parseInt(c._("svg").getAttribute("height")))),g._x=-(.5*Math.round(parseInt(g._("svg").getAttribute("width")))),o?g._y=.4*c._y:g._y=-c._y,log(u),python.addSVGShadow(c._("svg")),python.addSVGShadow(g._("svg"))}}},webFontRouteSetup:function(t,e,n,o){log("webFontRoute"),t.innerHTML="";for(var a=0;a<e.length;a++){var i=document.createElement("div");i.id=n+"_"+a;var r=e[a].strapText,s=e[a].strapFontSize;e[a].strapLineHeight;var l=e[a].dateEffect,d=parseInt(t.style.width.split("px")[0]);if("uaear"==o)var p=parseInt(t.style.height.split("px")[0])+20;else var p=parseInt(t.style.height.split("px")[0]);i.id=n+"_"+a,i.style.cssText="/*background-color:#990000;*/ color:#fff;width:"+4*d+"px; height:"+p+"px; left:-"+2*d+"px; line-height:"+s+"px; top:-"+1.5*p+"px;position:absolute; font-family:Arial,'Helvetica Neue',Helvetica,sans-serif; text-align:center; font-weight:bold; font-size:"+s+"px;",i.innerHTML+=r,t.appendChild(i),void 0!=e[a].dateEffect&&(e[a].datePost?postDateElements.push(i):preDateElements.push(i)),log(l)}},buttonFontSetup:function(t,e,n){t.innerHTML="";var o="buttonTextGFX";if("pl"==n)python.buttonPolishWebFontRouteSetup(t,e,"buttonText",n);else if("ru"==n)python.buttonRussianWebFontRouteSetup(t,e,"buttonText",n);else if("uaear"==n)python.buttonArabicWebFontRouteSetup(t,e,"buttonText",n);else for(var a=0;a<e.length;a++){var i=e[a].buttonText,r=e[a].buttonFontSize,s=e[a].buttonFunction,l=e[a].dateEffect,d=e[a].datePost,p=e[a].buttonID;if("de"==n||"at"==n||"chde"==n){var h=TextField(o,i,r,0,-5,"center","#ffffff");python.createBtn(t,h,.5*r,.4*r,p,"255,153,0,1","29,29,27,0.9",s,l,d,python.howmanylines(i),!1)}else{var h=TextField(o,i,r,0,-5,"left","#ffffff");python.createBtn(t,h,.5*r,.4*r,p,"255,153,0,1","29,29,27,0.9",s,l,d,python.howmanylines(i),!1)}}},buttonPolishWebFontRouteSetup:function(t,e,n,o){log("PolishFontRoute"),t.innerHTML="";for(var a=0;a<e.length;a++){var i=document.createElement("div");i.id=n+"_"+a,parseInt(t.style.width.split("px")[0]),parseInt(t.style.height.split("px")[0]);var r=e[a].buttonText,s=e[a].buttonFontSize,l=e[a].buttonFunction,d=e[a].dateEffect,p=e[a].datePost,h=e[a].buttonID,f=r.split("<br />"),u=python.findLongWord(f).length*s*1,c=f.length*s;i.id=n+"_"+a,i.style.width=u+"px",i.style.height=c+"px",i.className="do",i.innerHTML+='<div class="do" width="'+u+'px" height="'+c+'px" style="color:#fff;font-family:Arial, Helvetica, tahoma, verdana, 宋体, SimSun, 华文细黑, STXihei, sans-serif;;font-size:'+s+'px;">'+r+"</div>",python.createBtn(t,i,1*s,.7*s,h,"255,153,0,1","29,29,27,0.9",l,d,p,f.length,!1,o)}},buttonRussianWebFontRouteSetup:function(t,e,n,o){log("-------------------------------------------------------------------------------------------------------------------------------------------"),log("RussianFontRoute"),t.innerHTML="";for(var a=0;a<e.length;a++){log(e[a]);var i=document.createElement("div");parseInt(t.style.width.split("px")[0]),parseInt(t.style.height.split("px")[0]);var r=e[a].buttonText,s=e[a].buttonFontSize,l=e[a].buttonFunction,d=e[a].dateEffect,p=e[a].datePost,h=e[a].buttonID,f=r.split("<br />"),u=python.findLongWord(f).length*s*.6,c=f.length*s;i.id=n+"_"+a,i.style.width=u+"px",i.style.height=c+"px",i.className="do",i.innerHTML+='<div class="do" width="'+u+'px" height="'+c+'px" style="color:#fff;font-family:Arial, Helvetica, tahoma;font-size:'+s+'px;">'+r+"</div>",python.createBtn(t,i,1*s,.7*s,h,"255,153,0,1","29,29,27,0.9",l,d,p,f.length,!1,o)}},buttonArabicWebFontRouteSetup:function(t,e,n,o){log("ArabicFontRoute"),t.innerHTML="";for(var a=0;a<e.length;a++){var i=document.createElement("div");i.id=n+"_"+a,parseInt(t.style.width.split("px")[0]),parseInt(t.style.height.split("px")[0]);var r=e[a].buttonText,s=e[a].buttonFontSize,l=e[a].buttonFunction,d=e[a].dateEffect,p=e[a].datePost,h=e[a].buttonID,f=r.split("<br />"),u=python.findLongWord(f).length*s*.4,c=f.length*s;i.id=n+"_"+a,i.style.width=u+"px",i.style.height=c+"px",i.className="do",i.innerHTML+='<div class="do" width="'+u+'px" height="'+c+'px" style="color:#fff;font-family:Arial, Helvetica, tahoma, verdana, 宋体, SimSun, 华文细黑, STXihei, sans-serif;;font-size:'+s+'px;">'+r+"</div>",python.createBtn(t,i,1*s,.7*s,h,"255,153,0,1","29,29,27,0.9",l,d,p,f.length,!1,o)}},findLongWord:function(t){var e="";return t.forEach(function(t){t.length>e.length&&(e=t)}),e},howmanylines:function(t){return t.split("\n").length},findWidth:function(t){return Math.floor(t.children[0].getAttribute("width").split("px")[0])},createBtn:function(t,e,n,o,a,i,r,s,l,d,p,h,f){log("CREATE BTN------------: "+t,e,n,o,a,i,r,s,l,d,p,h);var u=parseInt(e.children[0].getAttribute("height").split("px")[0]),c=Math.floor(parseInt(u)),g=python.findWidth(e),y=Math.round(e.children[0].getAttribute("height").split("px")[0])+2*o,v=Math.floor((Math.round(e.children[0].getAttribute("width").split("px")[0])+2.5*n+c)*.98);python.webFontButtonTidy(f,t,e,n,o,g,c);var x=document.createElement("div");x.id=a.toString(),x.className="do",x.style.width=v+"px",x.style.height=y+"px",t.appendChild(x),void 0!=l&&python.storeDateEffectDivs(d,x),x.appendChild(e),e.style.marginLeft=n+"px",e.style.marginTop=o-.1*o+"px";var b=python.tidyTriangle(p,n,o,g),m=python.drawSVGButtonBox(v,y,r,i),w=x.id+"_flash",_=python.drawSVGButtonBoxFlash(w,v,y,i);python.buildGFXforBTN(x,v,y,m,b,_),"uaear"==f&&(TweenMax.set(tri,{x:"-="+1.9*n}),TweenMax.set(x.children[0],{x:"-="+.5*n})),TweenMax.set(x,{x:-(.5*x.style.width.split("px")[0]),y:-(.5*x.style.height.split("px")[0])}),TweenMax.set(w,{alpha:0}),python.giveButtonAction(x.id,w,s),h&&spreadOutButtons(mc_button,2*y)},drawSVGButtonBox:function(t,e,n,o){return'<svg width="'+t+'" height="'+e+'"><rect width="'+t+'" height="'+e+'" style="fill:rgba('+n+");stroke-width:10;stroke:rgba("+o+')" /></svg>'},drawSVGButtonBoxFlash:function(t,e,n,o){return'<div id="'+t+'" style="position:absolute;top:0;width:'+e+"px; height:"+n+'px;display:block;"><svg width="'+e+'" height="'+n+'"><rect width="'+e+'" height="'+n+'" style="fill:rgba('+o+');" /></svg></div>'},tidyTriangle:function(t,e,n,o){var a;if(1==t)var i=Math.floor(1.2*e),r=[i,i+1.7*n,o+1.9*e];else if(2==t)var i=Math.floor(2*e),r=[i,i+2.5*n,o+2.5*e];else if(3==t)var i=Math.floor(2.5*e),r=[i,i+3.5*n,o+3.2*e];else var i=Math.floor(.88*e),r=[i,i+1.22*n,o+2*e];return'<div id="tri" style="width:'+r[0]+"px; height:"+r[0]+"px; margin-top:-"+r[1]+"px; margin-left:"+r[2]+'px;"><svg height="'+r[0]+'" width="'+r[0]+'"><polygon points="0,0 0,'+r[0]+" "+r[0]+","+.5*r[0]+'" style="fill:#ffffff;"/></svg></div>'},buildGFXforBTN:function(t,e,n,o,a,i){t.innerHTML+='<div style="width:'+e+"px; height:"+n+'px;display:block;">'+o+"</div>",t.innerHTML+=a,t.innerHTML+=i},storeDateEffectDivs:function(t,e){t?postDateElements.push(e):preDateElements.push(e)},webFontButtonTidy:function(t,e,n,o,a,i,r){"uaear"==t?(TweenMax.set(e,{y:"+=1"}),n.children[0].getAttribute("width").split("px")[0]):"ru"==t&&(TweenMax.set(e,{y:"-=1"}),n.children[0].getAttribute("width").split("px")[0])},spreadOutButtons:function(t,e){for(var n=0;n<t.children.length;n++)TweenMax.set(t.children[n],{y:e*n})},giveButtonAction:function(t,e,n){if(log("setUpButton",t),!t._hasClickHandler){log(t),log(e),log(n);var o=$(t)._("#"+e).lastChild._("rect");log(o),o.mouseEnabled=!0,o.buttonMode=!0,o.addEventListener("mouseover",python.onCtaOver),o.addEventListener("click",function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.target||t.srcElement,t.eventPhase,python.onCtaClicked(n)}),t._hasClickHandler=!0}},onCtaOver:function(t){log("onCtaOver"),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;var e=t.target||t.srcElement;t.eventPhase;var n=e.parentNode.parentNode.parentNode.id;log(n),python.btnFlash($(n),e.parentNode.parentNode.id)},btnFlash:function(t,e){log(t),log(e),TweenMax.set(e,{alpha:0}),TweenMax.from(e,.25,{alpha:1})},onCtaClicked:function(t){log("onCtaClicked"),window[t](arguments)},setUpDateGFX:function(t,e,n){log("-----------------------------------------------------------setUpDateGFX"),t.innerHTML="";for(var o=0;o<e.length;o++){strapCounter++;var a=fontArray[1].dateFont,i=e[o].dateText;e[o].dateSupScript;var r=e[o].dateFontSize,s=e[o].dateColour,l=e[o].dateEffect;if(log(i),"pl"==n||"ru"==n||"uaear"==n){var a="Arial,'Helvetica Neue',Helvetica,sans-serif;",d=document.createElement("div");"uaear"==n?t.style.width=r+"px":t.style.width=i.length*r+"px",t.style.cssText+="text-align:center;",d.setAttribute("width",t.style.width),d.setAttribute("height",t.style.height),d.className="do",d.style.cssText+="font-size:"+r+"px; font-family:"+a+"; font-weight:bold;color:"+s+";","uaear"==n?d.style.cssText+="top:-"+2*r+"px":d.style.cssText+="letter-spacing:"+.15*r+"px;left:-45%;margin-left:10%;top:-"+.8*r+"px",d.innerHTML=i,t.appendChild(d),python.addSVGShadow(d)}else{var d=TextField({normal:a},i,r,Math.floor(r*fontArray[1].dateKerning),0,"center",s);d.id="text_"+strapCounter,t.appendChild(d),d._x=-(.5*Math.round(parseInt(d._("svg").getAttribute("width")))),d._y=-(.5*Math.round(parseInt(d._("svg").getAttribute("height")))),python.addSVGShadow(d._("svg"))}log(l),void 0!=e[o].dateEffect&&(e[o].datePost?postDateElements.push(d):preDateElements.push(d))}},sortOutDateElements:function(t,e){log("---------------------------------------sortOutDatesElements"),log(t),log(e),out?(fbf.displayNone(t),fbf.displayBlock(e)):(fbf.displayBlock(t),fbf.displayNone(e)),log("----------------------------------------------------")},addSVGShadow:function(t){log("-------------------------------     addSVGShadow "+t),t.style.cssText+="filter: drop-shadow(2px 2px 2px rgba(0,0,0,1));-webkit-filter: drop-shadow(2px 2px 2px rgba(0,0,0,1));-ms-filter: 'progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, Color='#444')';filter: 'progid:DXImageTransform.Microsoft.Dropshadow(OffX=12, OffY=12, Color='#444')';"},createShadowGlow:function(t,e,n,o){log("-------------------------------------createShadowGlow"),log(t._x),log(t._y),log(t._scaleX),log(e),python.injectCanvas("cv_strapline",WID,HEI,o);var a=document.getElementById("cv_strapline"),i=a.getContext("2d");a.width,a.height;var r=WID*t._scaleX,i=a.getContext("2d"),s=Math.round(t._x),l=Math.round(t._y),d=Math.floor(e*t._scaleX*.1),p=1.5*Math.floor(e*t._scaleX),r=Math.floor(e*t._scaleX*1.5),h=i.createRadialGradient(s,l,d,s,l,p);h.addColorStop(0,"rgba(0,0,0,0.8)"),h.addColorStop(.5,"rgba(0,0,0,0)"),i.fillStyle=h,i.arc(s,l,r,0,2*Math.PI),i.fill(),a.style.cssText+="-ms-filter: blur(2px); filter:progid:DXImageTransform.Microsoft.Blur(pixelradius='2', shadowopacity='0.0');"},createCanvas:function(){python.injectCanvas("cv_strapline",WID,HEI,_root),$("cv_strapline").style.cssText="display:block;width:300px;height:250px;position:absolute;z-index:1000;top:0;";var t=document.getElementById("cv_strapline").getContext("2d"),e=$("mc_date")._("svg");log(e);var n=window.URL||window.webkitURL||window,o=new Image,a=new Blob([e],{type:"image/svg+xml"}),i=n.createObjectURL(a);log(i),log(o),log(a),log(t),o.onload=function(){t.drawImage(o,0,0),n.revokeObjectURL(i)},o.src=i},injectCanvas:function(t,e,n,o){log("injectCanvas");var a=document.createElement("canvas");a.id=t,a.className="do",a.width=e,a.height=n;var i=python.findMyLocInDom(o);return _root.insertBefore(a,_root.childNodes[i]),a},findMyLocInDom:function(t){for(var e,n=t.parentNode.children,o=0;o<n.length;o++)n[o].id==t.id&&(e=o+1);return e},fadeDownAndDisplayNone:function(t){log("fadeDownAndDisplayNone: "+t),TweenMax.to(t,1,{alpha:0,onComplete:fbf.displayNone,onCompleteParams:[t]})},animateLogo:function(t,e){log("animateLogo: "+t),fbf.show(t);var n=t._scaleX;TweenMax.set(t,{alpha:0}),TweenMax.to(t,.1,{alpha:1,delay:e}),TweenMax.from(t,.2,{scale:3*n,ease:Back.easeOut.config(1),delay:e})},animateDate:function(t,e){log("animateDate: "+t),fbf.show(t);var n=t._scaleX;TweenMax.from(mc_date,1,{alpha:0,scale:1.1*n,ease:Power1.easeOut,delay:e})},animateSimpleFadeUp:function(t,e){fbf.show(t),TweenMax.from(t,.5,{alpha:0,delay:e})},animateStrap:function(t,e){log("animateStrap: "+t),fbf.show(t);var n=t._scaleX;TweenMax.set(t,{alpha:0}),TweenMax.set(t,{alpha:1,delay:e}),TweenMax.from(t,.2,{scale:5*n,ease:Expo.easeOut,delay:e}),TweenMax.to(t,.1,{scale:.98*n,delay:e+.2}),$("cv_strapline")&&(log("000000000000000000000000000000000000000000000000000"),TweenMax.from($("cv_strapline"),4,{alpha:0})),TweenMax.to(t,.1,{scale:1*n,delay:e+.4})},animateRating:function(t,e){log("animateRating: "+t),fbf.show(t),TweenMax.from(t,.5,{alpha:0,delay:e})},animateBackgroundResp:function(t,e,n){log("animateBackground: "+t),fbf.show(t),TweenMax.set(t),fbf.show(t);var o=t._scaleX;TweenMax.from(t,3,{scale:2*o,ease:Expo.easeOut,delay:e,transformOrigin:n})},animateBackground:function(t,e,n){fbf.show(t),TweenMax.from(t,4,{transformOrigin:n,scale:1.5,ease:Expo.easeOut,delay:e})},animateForeground:function(t,e,n){fbf.show(t),TweenMax.from(t,4,{transformOrigin:n,scale:2,ease:Expo.easeOut,delay:e})},btnGrow:function(t,e){log("btnGrow"),TweenMax.set(t,{scaleX:0,scaleY:0}),TweenMax.to(t,.5,{scaleY:1,ease:Back.easeOut,delay:e}),TweenMax.to(t,.1,{scaleX:.05,ease:Expo.easeOut,delay:e}),TweenMax.to(t,.5,{scaleX:1,ease:Expo.easeOut,delay:e+.4}),TweenMax.set(t.children[3],{alpha:1}),TweenMax.to(t.children[3],.5,{alpha:0,ease:Elastic.easeIn.config(2,.2),delay:e+.3})},animateButton:function(t,e){log("animateButton: "+t),TweenMax.set(t,{alpha:0,transformOrigin:"50% 50%"}),TweenMax.set(t,{alpha:1,delay:e}),TweenMax.delayedCall(e,python.btnGrow,[t,0])},showChosenButton:function(t){fbf.show($(t))}};